<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tinḳä - SALER x SQUID GAME</title>
    <link rel="stylesheet" href="tinka-styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Apply saved theme immediately to prevent flash -->
    <script>
        (function () {
            let savedTheme = localStorage.getItem('global-theme');
            if (!savedTheme) {
                savedTheme = localStorage.getItem('lakir-theme') ||
                    localStorage.getItem('theme') ||
                    'light';
                localStorage.setItem('global-theme', savedTheme);
                localStorage.removeItem('lakir-theme');
                localStorage.removeItem('theme');
            }
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
</head>

<body>
    <!-- Global Controls -->
    <div class="global-controls">
        <button class="close close-rules-btn control-btn" aria-label="Close" style="display: none;">×</button>
        <button id="global-theme-toggle" class="control-btn theme-btn" aria-label="Toggle theme">
            <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        </button>
        <button id="global-music-toggle" class="control-btn music-btn" aria-label="Toggle music">
            <i class="fas fa-music"></i>
        </button>
    </div>

    <!-- Music Control Panel -->
    <div id="music-control-panel" class="music-control-panel hidden">
        <div class="music-panel-header">
            <h3>🎵 Squid Game Soundtrack</h3>
            <button id="close-music-panel" class="close-panel-btn">&times;</button>
        </div>
        <div class="music-panel-content">
            <div class="current-track">
                <div class="track-info">
                    <span class="track-label">Now Playing:</span>
                    <span id="current-track-name" class="track-name">No track selected</span>
                </div>
                <div class="track-progress">
                    <span id="current-time">0:00</span>
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <span id="total-time">0:00</span>
                </div>
            </div>
            <div class="music-controls">
                <button id="prev-track" class="track-btn" title="Previous Track">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button id="play-pause" class="track-btn play-pause-btn" title="Play/Pause">
                    <i class="fas fa-play"></i>
                </button>
                <button id="next-track" class="track-btn" title="Next Track">
                    <i class="fas fa-step-forward"></i>
                </button>
            </div>
            <div class="track-list">
                <h4>Playlist:</h4>
                <div id="playlist-container" class="playlist-container">
                    <!-- Tracks will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Squid Game Background Elements -->
    <div class="parallax-container">
        <div class="parallax-layer layer-1"></div>
        <div class="parallax-layer layer-2"></div>
        <div class="parallax-layer layer-3"></div>
        <div class="parallax-layer layer-4"></div>
        <div class="parallax-layer layer-5"></div>

        <div class="floating-particles">
            <div class="particle" style="--delay: 0s"></div>
            <div class="particle" style="--delay: 2s"></div>
            <div class="particle" style="--delay: 4s"></div>
            <div class="particle" style="--delay: 6s"></div>
            <div class="particle" style="--delay: 8s"></div>
        </div>

        <div class="interactive-grid">
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
            <div class="grid-cell"></div>
        </div>

        <!-- Cosmic Effects -->
        <div class="aurora-effect"></div>
        <div class="nebula-clouds"></div>
        <div class="energy-rings"></div>
        <div class="cosmic-dust"></div>
        <div class="stellar-particles"></div>
        <div class="quantum-waves"></div>
        <div class="plasma-orbs"></div>
        <div class="neural-network"></div>
        <div class="holographic-grid"></div>
        <div class="time-portals"></div>
        <div class="crystal-shards"></div>
        <div class="energy-beams"></div>
        <div class="cosmic-strings"></div>
        <div class="dimensional-rifts"></div>
        <div class="quantum-foam"></div>
        <div class="stellar-wind"></div>

        <!-- Squid Game Elements -->
        <div class="squid-game-elements">
            <div class="squid-shape circle-shape"></div>
            <div class="squid-shape triangle-shape"></div>
            <div class="squid-shape square-shape"></div>
            <div class="squid-shape circle-shape-2"></div>
            <div class="squid-shape triangle-shape-2"></div>
            <div class="squid-shape square-shape-2"></div>

            <div class="pink-soldier soldier-1"></div>
            <div class="pink-soldier soldier-2"></div>
            <div class="pink-soldier soldier-3"></div>

            <div class="game-mask mask-1"></div>
            <div class="game-mask mask-2"></div>
            <div class="game-mask mask-3"></div>

            <div class="glass-panel panel-1"></div>
            <div class="glass-panel panel-2"></div>
            <div class="glass-panel panel-3"></div>
            <div class="glass-panel panel-4"></div>
            <div class="glass-panel panel-5"></div>
            <div class="glass-panel panel-6"></div>

            <div class="honeycomb-game">
                <div class="honeycomb-cell cell-1"></div>
                <div class="honeycomb-cell cell-2"></div>
                <div class="honeycomb-cell cell-3"></div>
                <div class="honeycomb-cell cell-4"></div>
                <div class="honeycomb-cell cell-5"></div>
                <div class="honeycomb-cell cell-6"></div>
            </div>

            <div class="tug-rope">
                <div class="rope-segment segment-1"></div>
                <div class="rope-segment segment-2"></div>
                <div class="rope-segment segment-3"></div>
                <div class="rope-segment segment-4"></div>
            </div>

            <div class="marbles-container">
                <div class="marble marble-1"></div>
                <div class="marble marble-2"></div>
                <div class="marble marble-3"></div>
                <div class="marble marble-4"></div>
                <div class="marble marble-5"></div>
                <div class="marble marble-6"></div>
            </div>

            <div class="doll-container">
                <div class="doll-head"></div>
                <div class="doll-body"></div>
                <div class="doll-arm arm-left"></div>
                <div class="doll-arm arm-right"></div>
                <div class="doll-eye eye-left"></div>
                <div class="doll-eye eye-right"></div>
            </div>

            <div class="vip-chair chair-1"></div>
            <div class="vip-chair chair-2"></div>
            <div class="vip-chair chair-3"></div>

            <div class="money-pile pile-1"></div>
            <div class="money-pile pile-2"></div>
            <div class="money-pile pile-3"></div>

            <div class="arena-light light-1"></div>
            <div class="arena-light light-2"></div>
            <div class="arena-light light-3"></div>
            <div class="arena-light light-4"></div>

            <div class="squid-logo">
                <div class="logo-circle"></div>
                <div class="logo-triangle"></div>
                <div class="logo-square"></div>
            </div>

            <div class="player-number number-456"></div>
            <div class="player-number number-067"></div>
            <div class="player-number number-001"></div>

            <div class="game-instruction instruction-1"></div>
            <div class="game-instruction instruction-2"></div>
            <div class="game-instruction instruction-3"></div>

            <div class="elimination-effect elim-1"></div>
            <div class="elimination-effect elim-2"></div>
            <div class="elimination-effect elim-3"></div>

            <div class="money-counter">
                <div class="counter-digit">4</div>
                <div class="counter-digit">5</div>
                <div class="counter-digit">6</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
                <div class="counter-digit">0</div>
            </div>

            <div class="game-timer">
                <div class="timer-display">00:00</div>
                <div class="timer-progress"></div>
            </div>

            <div class="camera camera-1"></div>
            <div class="camera camera-2"></div>
            <div class="camera camera-3"></div>

            <div class="guard-tower tower-1"></div>
            <div class="guard-tower tower-2"></div>

            <div class="arena-fence">
                <div class="fence-top"></div>
                <div class="fence-bottom"></div>
                <div class="fence-left"></div>
                <div class="fence-right"></div>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Tinḳä</h1>
            <p class="subtitle">A strategic 3×3 grid capture game</p>
            <p class="etymology">Inspired by Urdu "Teen" (three) — a playful, minimalist game of fast-paced strategy</p>
        </header>
        <div class="game-info">
            <div class="player-info">
                <div class="player player1 active" id="player1">
                    <div class="stone stone1"></div>
                    <span>Player 1</span>
                    <div class="stone-count" id="player1-count">3</div>
                </div>
                <div class="player player2" id="player2">
                    <div class="stone stone2"></div>
                    <span>Player 2</span>
                    <div class="stone-count" id="player2-count">3</div>
                </div>
            </div>
            <div class="game-status" id="gameStatus">
                <span id="statusText">Player 1, place your stone!</span>
            </div>
        </div>
        <div class="game-board">
            <div class="graph-container">
                <!-- 3x3 Grid Nodes -->
                <div class="node" id="0,0" data-row="0" data-col="0">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="0,1" data-row="0" data-col="1">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="0,2" data-row="0" data-col="2">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="1,0" data-row="1" data-col="0">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="1,1" data-row="1" data-col="1">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="1,2" data-row="1" data-col="2">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="2,0" data-row="2" data-col="0">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="2,1" data-row="2" data-col="1">
                    <div class="node-content"></div>
                </div>
                <div class="node" id="2,2" data-row="2" data-col="2">
                    <div class="node-content"></div>
                </div>
                <!-- SVG for grid lines -->
                <svg class="edges" viewBox="0 0 250 250" xmlns="http://www.w3.org/2000/svg">
                    <!-- Horizontal lines -->
                    <line x1="15" y1="15" x2="125" y2="15" class="edge" />
                    <line x1="125" y1="15" x2="235" y2="15" class="edge" />
                    <line x1="15" y1="125" x2="125" y2="125" class="edge" />
                    <line x1="125" y1="125" x2="235" y2="125" class="edge" />
                    <line x1="15" y1="235" x2="125" y2="235" class="edge" />
                    <line x1="125" y1="235" x2="235" y2="235" class="edge" />
                    <!-- Vertical lines -->
                    <line x1="15" y1="15" x2="15" y2="125" class="edge" />
                    <line x1="15" y1="125" x2="15" y2="235" class="edge" />
                    <line x1="125" y1="15" x2="125" y2="125" class="edge" />
                    <line x1="125" y1="125" x2="125" y2="235" class="edge" />
                    <line x1="235" y1="15" x2="235" y2="125" class="edge" />
                    <line x1="235" y1="125" x2="235" y2="235" class="edge" />
                </svg>
            </div>
        </div>
        <div class="controls">
            <button id="homeBtn" class="btn btn-home">🏠 Home</button>
            <button id="resetBtn" class="btn btn-reset">🔄 New Game</button>
            <button id="rulesBtn" class="btn btn-rules">📖 Rules</button>
        </div>
    </div>
    <!-- Rules Modal as popup overlay -->
    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <button class="close close-rules-btn" aria-label="Close">×</button>
            <h2>⚪ Tinḳä – Rules</h2>
            <div class="rules-content">
                <p class="etymology-note"><em>Inspired by Urdu "Teen" (three) — a playful, minimalist game of fast-paced
                        strategy</em></p>
                <h3>🎯 Objective</h3>
                <ul>
                    <li>Each player has <b>3 stones</b>.</li>
                    <li>The goal is to <b>remove all of the opponent’s stones</b>.</li>
                    <li>A player loses when they have <b>no stones left on the board</b>.</li>
                </ul>
                <h3>⚙️ Game Setup</h3>
                <ul>
                    <li>Players take turns <b>placing one stone at a time</b> on any ⚪ (empty spot).</li>
                    <li>After both players have placed their 3 stones (<b>6 total on board</b>), <b>movement begins</b>.
                    </li>
                </ul>
                <h3>🚶 Movement Rules</h3>
                <ul>
                    <li>Stones can move to an <b>orthogonally adjacent empty ⚪</b>: up, down, left, or right.</li>
                    <li><b>Diagonal movement is not allowed</b>.</li>
                    <li>You <b>cannot move through or onto a space that is already occupied</b>.</li>
                </ul>
                <h3>🎯 Capture Rule</h3>
                <ul>
                    <li>You can <b>capture an opponent's stone</b> if:</li>
                    <ul>
                        <li>Your stone is on one side of a line of 3 ⚪ in a straight row or column.</li>
                        <li>The <b>middle ⚪ is occupied by an opponent's stone</b>.</li>
                        <li>The <b>far-end ⚪ is empty</b>.</li>
                    </ul>
                    <li>Then, you may <b>jump over the opponent's stone into the far ⚪</b>.</li>
                    <li>The opponent's stone is <b>removed from the board</b>.</li>
                    <li>✅ This move is like jumping in checkers, but <b>only allowed orthogonally</b>.</li>
                </ul>
                <h3>⛔ Blocked Moves</h3>
                <ul>
                    <li>If a player has <b>no valid moves</b>, they must <b>skip their turn</b>.</li>
                    <li>You <b>cannot jump over two stones at once</b> or make diagonal captures.</li>
                </ul>
                <h3>🏆 Winning</h3>
                <ul>
                    <li>The game ends when <b>one player has no stones left on the board</b>.</li>
                    <li>The opponent is then <b>declared the winner</b>.</li>
                </ul>
            </div>
        </div>
    </div>
    <script src="../shared/music-manager.js"></script>
    <script src="../shared/global-controls.js"></script>
    <script src="tinka-script.js?v=2"></script>
</body>

</html>